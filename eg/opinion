#!/usr/bin/env perl
use strict;
use warnings;

use Lingua::EN::Opinion;
use Statistics::Lite qw( mean );
use List::Util qw( sum0 );

my $input_file = shift || die "Usage: perl $0 /some/file.txt\n";

my $opinion = Lingua::EN::Opinion->new( file => $input_file );
$opinion->analyze();

my %score;
@score{ @{ $opinion->sentences } } = @{ $opinion->scores };

print "Most positive sentence:\n",
    [ map {"$score{$_} => $_"} sort { $score{$a} <=> $score{$b} } @{ $opinion->sentences } ]->[-1],
    "\n";
print "\n";
print "Most negative sentence:\n",
    [ map {"$score{$_} => $_"} sort { $score{$a} <=> $score{$b} } @{ $opinion->sentences } ]->[0],
    "\n";
print "\n";
print 'Average sentence score: ', mean( @{ $opinion->scores } ), "\n";
print "\n";
print 'Total sentence score: ', sum0( @{ $opinion->scores } ), "\n";
